!function(){"use strict";var t={350:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.InputImage=void 0;var n=function(){function t(t){this.hiddenCanvas=document.createElement("canvas"),this.hiddenContext=this.hiddenCanvas.getContext("2d"),this.sourceImage=t,this._width=0,this._height=0}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceImageAspectRatio",{get:function(){return this.sourceImage.width/this.sourceImage.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){var n=Math.min(this.sourceImage.width,t),i=e;if(this._width!==n||this._height!==i){console.log("Resize image from "+this._width+"x"+this._height+" to "+n+"x"+i+"."),this._width=n,this._height=i,this.hiddenCanvas.width=this.width,this.hiddenCanvas.height=this.height,this.hiddenContext.drawImage(this.sourceImage,0,0,this.width,this.height);var r=this.hiddenContext.getImageData(0,0,this.width,this.height).data;this.valueArray=new Uint8ClampedArray(this.width*this.height);for(var a=0;a<this.valueArray.length;a++){var o=r[4*a],s=r[4*a+1],h=r[4*a+2];this.valueArray[a]=(o+s+h)/3}}},t.prototype.sample=function(t,e){var n=Math.floor(t),i=t-n;return(this.getPixel(n,e)*(1-i)+this.getPixel(n+1,e)*i)/255},t.prototype.getPixel=function(t,e){return t<0||e<0||t>=this.width||e>=this.height?0:this.valueArray[e*this.width+t]},t}();e.InputImage=n},633:function(t,e,n){var i=n(61),r=n(350),a=n(886),o=n(174);n(457);var s=null;function h(t){var e=Date.now();if(null!=s){var n,r={backgroundColor:i.Parameters.invertColors?"black":"white",lineColor:i.Parameters.invertColors?"white":"black",lineWidth:i.Parameters.lineWidth,blur:i.Parameters.blur};t.initialize(r),s.resize(t.size.width,i.Parameters.verticalResolution),n=i.Parameters.trueIntensity?i.Parameters.invertColors?function(t,e){return Math.sqrt(s.sample(t,e))}:function(t,e){return Math.sqrt(1.001-s.sample(t,e))}:i.Parameters.invertColors?function(t,e){return s.sample(t,e)}:function(t,e){return 1-s.sample(t,e)};for(var a=s.sourceImageAspectRatio,o=t.size,h=function(t,e){var n=t.width/t.height,i=t.width,r=t.height;return e>n?r*=n/e:e<n&&(i*=e/n),{width:Math.floor(i),height:Math.floor(r)}}(t.size,a),l=.5*(o.width-h.width),u=.5*(o.height-h.height),c=h.width/s.width,d=h.height/s.height,g=2*Math.PI*i.Parameters.angle,p=Math.cos(g),f=Math.sin(g),P=500*i.Parameters.maxFrequency/s.width,v=.5*d*i.Parameters.maxAmplitude/p,b=1/(2*P),y=0;y<s.height;y++){t.startLine();for(var m=u+(y+.5)*d,w=0,x=0;x<s.width-1;x+=b){var O=l+(x+.5)*c,C=n(x,y),_=C*P,I=C*v*Math.sin(w),L=I*p,j=-I*f;t.addPointToLine(O+j,m+L),w+=_*b}t.endLine()}t.finalize(),console.log("Plotting took "+(Date.now()-e)+" ms.")}else console.log("Image not loaded!")}var l=new a.PlotterCanvas2D;function u(){h(l)}function c(t){l.blur=t}i.Parameters.addRedrawObserver(u),i.Parameters.addBlurChangeObserver(c),c(i.Parameters.blur);var d=new o.PlotterSVG;function g(t){s=new r.InputImage(t),Page.Canvas.showLoader(!1),u()}i.Parameters.addDownloadObserver((function(){h(d);var t="image-as-sines.svg",e="text/plain",n=d.export(),i=new Blob([n],{type:e});if(void 0!==window.navigator&&void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var r=URL.createObjectURL(i),a=document.createElement("a");a.download=t,a.href=r,a.dataset.downloadurl=e+":"+a.download+":"+a.href,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((function(){URL.revokeObjectURL(r)}),5e3)}})),i.Parameters.addFileUploadObserver(g),Page.Canvas.showLoader(!0);var p=new Image;p.addEventListener("load",(function(){g(p)})),p.src="./resources/cat.jpg"},457:function(){},61:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Parameters=void 0,n(457);var i="vertical-resolution-range-id",r="max-amplitude-range-id",a="max-frequency-range-id",o="angle-range-id",s="line-width-range-id",h="invert-colors-checkbox-id",l="blur-range-id",u="true-intensity-checkbox-id",c=[];function d(){for(var t=0,e=c;t<e.length;t++)(0,e[t])()}Page.Range.addLazyObserver(i,d),Page.Range.addLazyObserver(r,d),Page.Range.addLazyObserver(a,d),Page.Range.addLazyObserver(o,d),Page.Range.addLazyObserver(s,d),Page.Checkbox.addObserver(h,d),Page.Checkbox.addObserver(u,d),Page.Canvas.Observers.canvasResize.push(d);var g=function(){function t(){}return t.addFileUploadObserver=function(t){Page.FileControl.addUploadObserver("input-image-upload-button",(function(e){if(1===e.length){Page.Canvas.showLoader(!0);var n=new FileReader;n.onload=function(){var e=new Image;e.addEventListener("load",(function(){t(e)})),e.src=n.result},n.readAsDataURL(e[0])}}))},Object.defineProperty(t,"verticalResolution",{get:function(){return Page.Range.getValue(i)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxAmplitude",{get:function(){return Page.Range.getValue(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxFrequency",{get:function(){return Page.Range.getValue(a)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"angle",{get:function(){return Page.Range.getValue(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lineWidth",{get:function(){return Page.Range.getValue(s)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invertColors",{get:function(){return Page.Checkbox.isChecked(h)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"trueIntensity",{get:function(){return Page.Checkbox.isChecked(u)},enumerable:!1,configurable:!0}),t.addRedrawObserver=function(t){c.push(t)},Object.defineProperty(t,"blur",{get:function(){return Page.Range.getValue(l)},enumerable:!1,configurable:!0}),t.addBlurChangeObserver=function(t){Page.Range.addObserver(l,t)},t.addDownloadObserver=function(t){Page.FileControl.addDownloadObserver("result-download-id",t)},t}();e.Parameters=g},792:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlotterBase=void 0;var n=.01*Math.PI,i=function(){function t(){}return t.prototype.startLine=function(){this.startLineInternal(),this.lastDrawnPoint=null,this.potentialNextPoint=null},t.prototype.addPointToLine=function(e,i){var r={x:e,y:i};null===this.lastDrawnPoint?(this.lastDrawnPoint=r,this.addFirstPointToLineInternal(this.lastDrawnPoint.x,this.lastDrawnPoint.y)):(null===this.potentialNextPoint||t.computeAngle(this.lastDrawnPoint,this.potentialNextPoint,r)>n&&(this.addPointToLineInternal(this.potentialNextPoint.x,this.potentialNextPoint.y),this.lastDrawnPoint=this.potentialNextPoint),this.potentialNextPoint=r)},t.prototype.endLine=function(){null!==this.potentialNextPoint&&this.addPointToLineInternal(this.potentialNextPoint.x,this.potentialNextPoint.y),this.lastDrawnPoint=null,this.potentialNextPoint=null,this.endLineInternal()},t.computeAngle=function(t,e,n){var i=Math.atan2(e.y-t.y,e.x-t.x),r=Math.atan2(n.y-e.y,n.x-e.x),a=Math.abs(i-r);return Math.min(a,2*Math.PI-a)},t}();e.PlotterBase=i},886:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlotterCanvas2D=void 0;var a=n(792);n(457);var o=function(t){function e(){var e,n=t.call(this)||this;return n.canvas=Page.Canvas.getCanvas(),n.context=n.canvas.getContext("2d",{alpha:!1}),n.cssPixel=null!==(e=window.devicePixelRatio)&&void 0!==e?e:1,n}return r(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return{width:Math.floor(this.canvas.width/this.cssPixel),height:Math.floor(this.canvas.height/this.cssPixel)}},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){this.resizeCanvas(),this.context.fillStyle=t.backgroundColor,this.context.strokeStyle=t.lineColor,this.context.lineWidth=t.lineWidth*this.cssPixel,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.finalize=function(){},Object.defineProperty(e.prototype,"blur",{set:function(t){this.canvas.style.filter=0===t?"":"blur("+t+"px)"},enumerable:!1,configurable:!0}),e.prototype.startLineInternal=function(){this.context.beginPath()},e.prototype.addFirstPointToLineInternal=function(t,e){var n=t*this.cssPixel,i=e*this.cssPixel;this.context.moveTo(n,i)},e.prototype.addPointToLineInternal=function(t,e){var n=t*this.cssPixel,i=e*this.cssPixel;this.context.lineTo(n,i)},e.prototype.endLineInternal=function(){this.context.stroke(),this.context.closePath()},e.prototype.resizeCanvas=function(){var t=Math.floor(this.cssPixel*this.canvas.clientWidth),e=Math.floor(this.cssPixel*this.canvas.clientHeight);this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=t,this.canvas.height=e)},e}(a.PlotterBase);e.PlotterCanvas2D=o},174:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlotterSVG=void 0;var a=n(792),o=function(t){function e(){return t.call(this)||this}return r(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return{width:1e3,height:1e3}},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){this.hasBlur=t.blur>0,this.stringParts=[],this.stringParts.push('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n'),this.stringParts.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1000 1000">\n'),this.hasBlur&&(this.stringParts.push("\t<defs>\n"),this.stringParts.push('\t\t<filter id="gaussianBlur" x="0" y="0">\n'),this.stringParts.push('\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="'+t.blur+'"/>\n'),this.stringParts.push("\t\t</filter>\n"),this.stringParts.push("\t</defs>\n"),this.stringParts.push('\t<g filter="url(#gaussianBlur)">\n')),this.stringParts.push('\t<path fill="'+t.backgroundColor+'" stroke="none" d="M0,0H1000V1000H0Z"/>\n'),this.stringParts.push('\t<g fill="none" stroke="'+t.lineColor+'" stroke-width="'+t.lineWidth+'" stroke-linejoin="round">\n')},e.prototype.finalize=function(){this.hasBlur&&this.stringParts.push("\t\t</g>\n"),this.stringParts.push("\t</g>\n"),this.stringParts.push("</svg>\n")},e.prototype.endLineInternal=function(){this.stringParts.push('"/>\n')},e.prototype.export=function(){var t=Date.now(),e=this.stringParts.join("");return console.log("Concatenation took "+(Date.now()-t)+" ms."),e},e.prototype.startLineInternal=function(){this.stringParts.push('\t\t<path d="')},e.prototype.addFirstPointToLineInternal=function(t,e){var n=t.toFixed(1),i=e.toFixed(1);this.stringParts.push("M"+n+","+i+"L")},e.prototype.addPointToLineInternal=function(t,e){var n=t.toFixed(1),i=e.toFixed(1);this.stringParts.push(n+","+i+" ")},e}(a.PlotterBase);e.PlotterSVG=o}},e={};!function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}(633)}();
//# sourceMappingURL=main.min.js.map