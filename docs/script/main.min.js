!function(){"use strict";var e={747:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.downloadTextFile=t.choosePattern=t.chooseLines=void 0;var i=n(61),r=n(393),a=n(748),o=n(833),s=n(213),u=n(827),h=n(726);t.chooseLines=function(e,t){var n=i.Parameters.linesType;return n===i.ELinesType.STRAIGHT?new r.LinesStraightLines(e,t):n===i.ELinesType.SPIRAL?new o.LinesSpiral(e,t):n===i.ELinesType.POLYGON?new s.LinesPolygon(e,t):new a.LinesSines(e,t)},t.choosePattern=function(e,t){return i.Parameters.pattern===i.EPattern.WAVES?new u.PatternWave(e,t):new h.PatternDithering(e,t)},t.downloadTextFile=function(e,t){var n="text/plain",i=new Blob([e],{type:n});if(void 0!==window.navigator&&void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var r=URL.createObjectURL(i),a=document.createElement("a");a.download=t,a.href=r,a.dataset.downloadurl=n+":"+a.download+":"+a.href,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((function(){URL.revokeObjectURL(r)}),5e3)}}},350:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InputImage=void 0;var n=function(){function e(e){this.hiddenCanvas=document.createElement("canvas"),this.hiddenContext=this.hiddenCanvas.getContext("2d"),this.sourceImage=e,this._size={width:0,height:0},this.resize({width:e.width,height:e.height})}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._size.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._size.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sourceImageAspectRatio",{get:function(){return this.sourceImage.width/this.sourceImage.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(e){var t=Math.min(this.sourceImage.width,e.width),n=Math.min(this.sourceImage.height,e.height);if(this.width!==t||this.height!==n){console.log("Resize image from "+this.width+"x"+this.height+" to "+t+"x"+n+"."),this._size.width=t,this._size.height=n,this.hiddenCanvas.width=this.width,this.hiddenCanvas.height=this.height,this.hiddenContext.drawImage(this.sourceImage,0,0,this.width,this.height);var i=this.hiddenContext.getImageData(0,0,this.width,this.height).data;this.valueArray=new Uint8ClampedArray(this.width*this.height);for(var r=0;r<this.valueArray.length;r++){var a=i[4*r],o=i[4*r+1],s=i[4*r+2];this.valueArray[r]=(a+o+s)/3}}},e.prototype.sample=function(e){var t={x:e.x*(this._size.width-1),y:e.y*(this._size.height-1)},n={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-n.x,y:t.y-n.y},r=this.getPixel(n.x,n.y),a=this.getPixel(n.x+1,n.y),o=this.getPixel(n.x,n.y+1),s=this.getPixel(n.x+1,n.y+1),u=this.interpolate(r,a,i.x),h=this.interpolate(o,s,i.x);return this.interpolate(u,h,i.y)/255},e.prototype.interpolate=function(e,t,n){return e*(1-n)+t*n},e.prototype.getPixel=function(e,t){return e<0||t<0||e>=this.width||t>=this.height?0:this.valueArray[t*this.width+e]},e}();t.InputImage=n},31:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.rotate=t.distance=void 0,t.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},t.rotate=function(e,t){var n=Math.cos(t),i=Math.sin(t);return{x:e.x*n-e.y*i,y:e.x*i+e.y*n}}},553:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LinesBase=void 0;t.LinesBase=function(){}},213:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinesPolygon=void 0;var a=n(31),o=n(61),s=function(e){function t(t,n){var i=e.call(this)||this;i._center={x:.5*t.width,y:.5*t.height},i._suggestedImageSize={width:t.width,height:t.height},i._linesSpacing=n,i._nbSides=o.Parameters.linesSides;var r=Math.sqrt(t.width*t.width+t.height*t.height);return i._maxSegments=Math.ceil(i._nbSides*r/n),i}return r(t,e),Object.defineProperty(t.prototype,"suggestedImageSize",{get:function(){return this._suggestedImageSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nbLines",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.walkOnLine=function(e,t,n){for(var i=Math.PI*(this._nbSides-2)/this._nbSides,r=2*this._linesSpacing/Math.tan(i/2)/this._nbSides,s=.5*r,u=o.Parameters.orientationInRadians,h=Math.cos(u),l=Math.sin(u),c={x:this._center.x,y:this._center.y},d=0;d<this._maxSegments;d++){for(var g=s+d*r,p=Math.PI+d%this._nbSides*2*Math.PI/this._nbSides,f={x:c.x+g*Math.cos(p),y:c.y+g*Math.sin(p)},y=p+u+Math.PI/2,P={x:Math.cos(y),y:Math.sin(y)},v=a.distance(c,f),b=0;b*t<v;b++){var m=b*t/v,_=c.x*(1-m)+f.x*m-this._center.x,x=c.y*(1-m)+f.y*m-this._center.y;n({x:h*_-l*x+this._center.x,y:l*_+h*x+this._center.y},P)}c=f}},t}(n(553).LinesBase);t.LinesPolygon=s},748:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinesSines=void 0;var a=n(553),o=n(61),s=function(e){function t(n,i){var r=e.call(this)||this;r._frequency=o.Parameters.linesFrequency,r._amplitude=.2*o.Parameters.linesAmplitude*Math.max(n.width,n.height),r._normal={x:-Math.sin(o.Parameters.orientationInRadians),y:Math.cos(o.Parameters.orientationInRadians)},r._lines=[],r._lines.push(t.computeLine(0,i,r._normal,n));for(var a=r.computeMaximumLinesNeeded(n,i)/2+1,s=1;s<a;s++)for(var u=-1;u<=2;u+=2){var h=s*u,l=t.computeLine(h,i,r._normal,n);r._lines.push(l)}return r._suggestedImageSize={width:n.width,height:n.height},r}return r(t,e),Object.defineProperty(t.prototype,"suggestedImageSize",{get:function(){return this._suggestedImageSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nbLines",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),t.prototype.walkOnLine=function(e,t,n){for(var i=this,r=this._lines[e],a=function(e){var t=i._amplitude*Math.sin(2*Math.PI*e*i._frequency);return{x:r.start.x*(1-e)+r.end.x*e+t*i._normal.x,y:r.start.y*(1-e)+r.end.y*e+t*i._normal.y}},o=r.length/t,s=0;s<o;s++)n(a(s*t/r.length),this._normal);n(a(1),this._normal)},t.computeLine=function(e,t,n,i){var r=Math.sqrt(i.width*i.width+i.height*i.height),a=n.y,o=-n.x,s=.5*i.width+e*t*n.x,u=.5*i.height+e*t*n.y;return{start:{x:s-.5*r*a,y:u-.5*r*o},end:{x:s+.5*r*a,y:u+.5*r*o},length:r}},t.prototype.computeMaximumLinesNeeded=function(e,t){var n=e.width+2*this._amplitude,i=e.height+2*this._amplitude,r=Math.sqrt(n*n+i*i);return Math.ceil(r/t)},t}(a.LinesBase);t.LinesSines=s},833:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinesSpiral=void 0;var a=n(61),o=function(e){function t(t,n){var i=e.call(this)||this;i._center={x:.5*t.width,y:.5*t.height},i._suggestedImageSize={width:t.width,height:t.height},i._radiusGap=.5*n;var r=Math.sqrt(t.width*t.width+t.height*t.height),a=Math.ceil(r/n);return i._maxAngle=a*Math.PI,i}return r(t,e),Object.defineProperty(t.prototype,"suggestedImageSize",{get:function(){return this._suggestedImageSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nbLines",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.walkOnLine=function(e,t,n){for(var i=a.Parameters.orientationInRadians,r=Math.cos(i),o=Math.sin(i),s=0;s<this._maxAngle;){var u=Math.cos(s),h=Math.sin(s),l=Math.ceil((s-i)/Math.PI),c=(l+.125)*this._radiusGap,d=this._radiusGap*(.5-l%2);n({x:this._center.x+d*r+c*u,y:this._center.y+d*o+c*h},{x:-u,y:-h}),s+=t/c}},t}(n(553).LinesBase);t.LinesSpiral=o},393:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinesStraightLines=void 0;var a,o=n(31),s=n(553),u=n(61);!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.DIAGONAL=2]="DIAGONAL"}(a||(a={}));var h=function(e){function t(n,i){var r=e.call(this)||this;r._normal={x:-Math.sin(u.Parameters.orientationInRadians),y:Math.cos(u.Parameters.orientationInRadians)};var o=a.DIAGONAL;u.Parameters.orientationInDegrees%180==90?o=a.VERTICAL:u.Parameters.orientationInDegrees%180==0&&(o=a.HORIZONTAL),r._lines=[],r._lines.push(t.computeLine(0,i,o,r._normal,n));for(var s=t.computeMaximumLinesNeeded(n,i)/2+1,h=1;h<s;h++)for(var l=-1;l<=2;l+=2){var c=h*l,d=t.computeLine(c,i,o,r._normal,n),g=d.start.x<-.1||d.start.x>n.width-1+.1,p=d.start.y<-.1||d.start.y>n.height-1+.1;if(g||p)break;r._lines.push(d)}return r._suggestedImageSize=t.computeBestImageSize(n,r._lines.length,o),r}return r(t,e),Object.defineProperty(t.prototype,"suggestedImageSize",{get:function(){return this._suggestedImageSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nbLines",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),t.prototype.walkOnLine=function(e,t,n){var i=this._lines[e];function r(e){return{x:i.start.x*(1-e)+i.end.x*e,y:i.start.y*(1-e)+i.end.y*e}}for(var a=i.length/t,o=0;o<a;o++)n(r(o*t/i.length),this._normal);n(r(1),this._normal)},t.computeLine=function(e,t,n,i,r){var s=i.y,u=-i.x,h={x:.5*r.width+e*t*i.x,y:.5*r.height+e*t*i.y},l={x:h.x,y:h.y},c=r.width-1,d=r.height-1;if(n===a.HORIZONTAL)h.x=0,l.x=c;else if(n===a.VERTICAL)h.y=0,l.y=d;else{var g=Math.min(h.x/s,h.y/u);h.x-=g*s,h.y-=g*u;var p=Math.min((c-l.x)/s,(d-l.y)/u);l.x+=p*s,l.y+=p*u}return{start:h,end:l,length:o.distance(h,l)}},t.computeBestImageSize=function(e,t,n){return n===a.HORIZONTAL?{width:e.width,height:t}:n===a.VERTICAL?{width:t,height:e.height}:{width:e.width,height:e.height}},t.computeMaximumLinesNeeded=function(e,t){var n=Math.sqrt(e.width*e.width+e.height*e.height);return Math.ceil(n/t)},t}(s.LinesBase);t.LinesStraightLines=h},633:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(61),s=n(350),u=n(886),h=n(174),l=a(n(747));function c(e,t){var n=performance.now();if(null!=e){t.resize();var i=t.fitImage(e.sourceImageAspectRatio),r=1/o.Parameters.linesCount*i.zoomFactor,a=l.chooseLines(i.sizeInPlotter,r),s=l.choosePattern(i,r);e.resize(a.suggestedImageSize);var u=s.buildPlotterInfos();t.initialize(u);for(var h=0;h<a.nbLines;h++)s.drawLine(a,h,e,t);t.finalize(),console.log("Plotting took "+(performance.now()-n)+" ms.")}else console.log("Image not loaded!")}n(457);var d=null,g=new u.PlotterCanvas2D;function p(){c(d,g)}function f(e){g.blur=e}function y(e){d=new s.InputImage(e),Page.Canvas.showLoader(!1),p()}o.Parameters.addRedrawObserver(p),o.Parameters.addBlurChangeObserver(f),f(o.Parameters.blur),o.Parameters.addDownloadObserver((function(){var e=new h.PlotterSVG;c(d,e);var t=e.export();l.downloadTextFile(t,"image-as-sines.svg")})),o.Parameters.addFileUploadObserver(y),Page.Canvas.showLoader(!0);var P=new Image;P.addEventListener("load",(function(){y(P)})),P.src="./resources/cat.jpg"},457:function(){},61:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EPattern=t.ELinesType=t.Parameters=void 0,n(457);var i,r,a="lines-type-tabs-id",o="lines-count-range-id",s="orientation-range-id",u="lines-sides-range-id",h="lines-amplitude-range-id",l="lines-frequency-range-id",c="pattern-tabs-id",d="max-amplitude-range-id",g="max-frequency-range-id",p="angle-range-id",f="wave-squareness-range-id",y="line-thickness-range-id",P="invert-colors-checkbox-id",v="blur-range-id";!function(e){e.STRAIGHT="0",e.SPIRAL="1",e.POLYGON="2",e.SINES="3"}(i||(i={})),t.ELinesType=i,function(e){e.WAVES="0",e.DITHERING="1"}(r||(r={})),t.EPattern=r;var b=[];function m(){for(var e=0,t=b;e<t.length;e++)(0,t[e])()}Page.Tabs.addObserver(a,m),Page.Range.addLazyObserver(o,m),Page.Range.addLazyObserver(s,m),Page.Range.addLazyObserver(u,m),Page.Range.addLazyObserver(h,m),Page.Range.addLazyObserver(l,m),Page.Tabs.addObserver(c,m),Page.Range.addLazyObserver(d,m),Page.Range.addLazyObserver(g,m),Page.Range.addLazyObserver(p,m),Page.Range.addLazyObserver(f,m),Page.Range.addLazyObserver(y,m),Page.Checkbox.addObserver(P,m),Page.Canvas.Observers.canvasResize.push(m);var _=function(){function e(){}return e.addFileUploadObserver=function(e){Page.FileControl.addUploadObserver("input-image-upload-button",(function(t){if(1===t.length){Page.Canvas.showLoader(!0);var n=new FileReader;n.onload=function(){var t=new Image;t.addEventListener("load",(function(){e(t)})),t.src=n.result},n.readAsDataURL(t[0])}}))},Object.defineProperty(e,"linesType",{get:function(){return Page.Tabs.getValues(a)[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"linesCount",{get:function(){return Page.Range.getValue(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"orientationInDegrees",{get:function(){return Page.Range.getValue(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"orientationInRadians",{get:function(){return this.orientationInDegrees/180*Math.PI},enumerable:!1,configurable:!0}),Object.defineProperty(e,"linesSides",{get:function(){return Page.Range.getValue(u)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"linesAmplitude",{get:function(){return Page.Range.getValue(h)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"linesFrequency",{get:function(){return Page.Range.getValue(l)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pattern",{get:function(){return Page.Tabs.getValues(c)[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"maxAmplitude",{get:function(){return Page.Range.getValue(d)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"maxFrequency",{get:function(){return Page.Range.getValue(g)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"angle",{get:function(){return Page.Range.getValue(p)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"waveSquareness",{get:function(){return Page.Range.getValue(f)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"lineThickness",{get:function(){return Page.Range.getValue(y)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"invertColors",{get:function(){return Page.Checkbox.isChecked(P)},enumerable:!1,configurable:!0}),e.addRedrawObserver=function(e){b.push(e)},Object.defineProperty(e,"blur",{get:function(){return Page.Range.getValue(v)},enumerable:!1,configurable:!0}),e.addBlurChangeObserver=function(e){Page.Range.addObserver(v,e)},e.addDownloadObserver=function(e){Page.FileControl.addDownloadObserver("result-download-id",e)},e}();function x(){var e=_.linesType;Page.Controls.setVisibility(u,e===i.POLYGON),Page.Controls.setVisibility(h,e===i.SINES),Page.Controls.setVisibility(l,e===i.SINES);var t=_.pattern;Page.Controls.setVisibility(p,t===r.WAVES),Page.Controls.setVisibility(f,t===r.WAVES),Page.Controls.setVisibility(y,t===r.WAVES)}t.Parameters=_,Page.Tabs.addObserver(a,x),Page.Tabs.addObserver(c,x),x();var w=null,O=null;Page.Tabs.addObserver(c,(function(){var e=_.pattern,t=Page.Range.getValue(d),n=Page.Range.getValue(g),i=w,a=O;e===r.WAVES?(i=null===i?1:i,a=null===a?.4:a):e===r.DITHERING&&(i=null===i?.5:i,a=null===a?.5:a),Page.Range.setValue(d,i),Page.Range.setValue(g,a),w=t,O=n,m()}))},919:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PatternBase=void 0;t.PatternBase=function(){}},726:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PatternDithering=void 0;var a=n(61),o=function(e){function t(n,i){var r=e.call(this)||this;r.samplingFunction=t.chooseBestSamplingFunction(),r.imageFitting=n,r.linesThickness=Math.max(1,a.Parameters.maxAmplitude*i);var o=a.Parameters.maxFrequency,s=(10*(1-o)+500*o)/n.zoomFactor;return r.step=1/s,r}return r(t,e),t.prototype.buildPlotterInfos=function(){return{backgroundColor:a.Parameters.invertColors?"black":"white",lineColor:a.Parameters.invertColors?"white":"black",lineThickness:this.linesThickness,roundLinecap:!1,blur:a.Parameters.blur}},t.prototype.drawLine=function(e,n,i,r){var a=this,o=13*n;e.walkOnLine(n,this.step,(function(e){var n,s=a.imageFitting.pixelToRelative(e);if(s.x<0||s.x>1||s.y<0||s.y>1)r.hasStartedALine&&r.endLine();else{var u=(0,1,(n=a.samplingFunction(i,s))<0?0:n>1?1:n),h=Math.floor(.99*u*t.ditheringPatterns.length),l=t.ditheringPatterns[h];if(l[Math.floor(o%l.length)]>.5){r.hasStartedALine||r.startLine();var c=a.imageFitting.relativeToAbsolute(e);r.addPointToLine(c.x,c.y)}else r.hasStartedALine&&(c=a.imageFitting.relativeToAbsolute(e),r.addPointToLine(c.x,c.y),r.endLine());o++}})),r.hasStartedALine&&r.endLine()},t.chooseBestSamplingFunction=function(){return a.Parameters.invertColors?function(e,t){return e.sample(t)}:function(e,t){return 1-e.sample(t)}},t.ditheringPatterns=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0],[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],[1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0],[1,0,1,0,0,1,0,0,1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[1,0,1,0,1,1,0,1,1,0,1,0,1,0,1,0],[1,0,1,1,0,1,0,1,1,0,1,1,0,1,1,0],[1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1],[1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1],[1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],t}(n(919).PatternBase);t.PatternDithering=o},827:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PatternWave=void 0;var a=n(61),o=function(e){function t(n,i){var r=e.call(this)||this;r.waveFunction=t.computeWaveFunction(),r.normalRotationFunction=t.computeNormalRotationFunction(),r.samplingFunction=t.chooseBestSamplingFunction(),r.imageFitting=n;var o=2500*a.Parameters.maxFrequency;r.maxFrequency=o/n.zoomFactor,r.maxAmplitude=.5*(i-a.Parameters.lineThickness)*a.Parameters.maxAmplitude;var s=Math.max(1,2*r.maxFrequency);return r.step=1/s,r}return r(t,e),t.prototype.buildPlotterInfos=function(){return{backgroundColor:a.Parameters.invertColors?"black":"white",lineColor:a.Parameters.invertColors?"white":"black",lineThickness:a.Parameters.lineThickness,roundLinecap:!0,blur:a.Parameters.blur}},t.prototype.drawLine=function(e,t,n,i){var r=this,a=0;e.walkOnLine(t,this.step,(function(e,t){var o=r.imageFitting.pixelToRelative(e);if(o.x<0||o.x>1||o.y<0||o.y>1)i.hasStartedALine&&i.endLine();else{var s=r.samplingFunction(n,o),u=s*r.maxAmplitude,h=r.waveFunction(a,u),l=r.normalRotationFunction(t),c=h*l.x,d=h*l.y,g=r.imageFitting.relativeToAbsolute(e);i.hasStartedALine||i.startLine(),i.addPointToLine(g.x+c,g.y+d);var p=s*r.maxFrequency;a+=p*r.step}})),i.hasStartedALine&&i.endLine()},t.computeNormalRotationFunction=function(){var e=2*a.Parameters.angle*Math.PI,t=Math.cos(e),n=Math.sin(e),i=1/t;return function(e){return{x:(t*e.x-n*e.y)*i,y:(n*e.x+t*e.y)*i}}},t.computeWaveFunction=function(){if(a.Parameters.waveSquareness<.005)return function(e,t){return t*Math.sin(e)};var e=1-.99*a.Parameters.waveSquareness;return function(t,n){var i=Math.sin(t);return n*Math.sign(i)*Math.pow(Math.abs(i),e)}},t.chooseBestSamplingFunction=function(){return a.Parameters.invertColors?function(e,t){return Math.sqrt(e.sample(t))}:function(e,t){return Math.sqrt(1.001-e.sample(t))}},t}(n(919).PatternBase);t.PatternWave=o},792:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlotterBase=void 0;var n=.01*Math.PI,i=function(){function e(){this._hasStartedALine=!1}return Object.defineProperty(e.prototype,"hasStartedALine",{get:function(){return this._hasStartedALine},enumerable:!1,configurable:!0}),e.prototype.startLine=function(){this._hasStartedALine=!0,this.startLineInternal(),this.lastDrawnPoint=null,this.potentialNextPoint=null},e.prototype.addPointToLine=function(t,i){var r={x:t,y:i};null===this.lastDrawnPoint?(this.lastDrawnPoint=r,this.addFirstPointToLineInternal(this.lastDrawnPoint.x,this.lastDrawnPoint.y)):(null===this.potentialNextPoint||e.computeAngle(this.lastDrawnPoint,this.potentialNextPoint,r)>n&&(this.addPointToLineInternal(this.potentialNextPoint.x,this.potentialNextPoint.y),this.lastDrawnPoint=this.potentialNextPoint),this.potentialNextPoint=r)},e.prototype.endLine=function(){null!==this.potentialNextPoint&&this.addPointToLineInternal(this.potentialNextPoint.x,this.potentialNextPoint.y),this.lastDrawnPoint=null,this.potentialNextPoint=null,this.endLineInternal(),this._hasStartedALine=!1},e.prototype.fitImage=function(e){var t=this.size,n=t.width/t.height,i={width:t.width,height:t.height};e>n?i.height=Math.floor(i.height*n/e):e<n&&(i.width=Math.floor(i.width*e/n));var r=.5*(t.width-i.width),a=.5*(t.height-i.height),o=Math.min(i.width,i.height),s=Math.min(e,1/e);return{sizeInPlotter:i,relativeToAbsolute:function(e){return{x:e.x+r,y:e.y+a}},pixelToRelative:function(e){return{x:e.x/(i.width-1),y:e.y/(i.height-1)}},zoomFactor:o/s}},e.computeAngle=function(e,t,n){var i=Math.atan2(t.y-e.y,t.x-e.x),r=Math.atan2(n.y-t.y,n.x-t.x),a=Math.abs(i-r);return Math.min(a,2*Math.PI-a)},e}();t.PlotterBase=i},886:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PlotterCanvas2D=void 0;var a=n(792);n(457);var o=function(e){function t(){var t,n=e.call(this)||this;return n.canvas=Page.Canvas.getCanvas(),n.context=n.canvas.getContext("2d",{alpha:!1}),n.cssPixel=null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,n}return r(t,e),t.prototype.resize=function(){var e=Math.floor(this.cssPixel*this.canvas.clientWidth),t=Math.floor(this.cssPixel*this.canvas.clientHeight);this.canvas.width===e&&this.canvas.height===t||(this.canvas.width=e,this.canvas.height=t)},t.prototype.initialize=function(e){this.context.fillStyle=e.backgroundColor,this.context.strokeStyle=e.lineColor,this.context.lineWidth=e.lineThickness*this.cssPixel,this.context.lineJoin="round",this.context.lineCap=e.roundLinecap?"round":"butt",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.finalize=function(){},Object.defineProperty(t.prototype,"blur",{set:function(e){this.canvas.style.filter=0===e?"":"blur("+e+"px)"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return{width:Math.floor(this.canvas.width/this.cssPixel),height:Math.floor(this.canvas.height/this.cssPixel)}},enumerable:!1,configurable:!0}),t.prototype.startLineInternal=function(){this.context.beginPath()},t.prototype.addFirstPointToLineInternal=function(e,t){var n=e*this.cssPixel,i=t*this.cssPixel;this.context.moveTo(n,i)},t.prototype.addPointToLineInternal=function(e,t){var n=e*this.cssPixel,i=t*this.cssPixel;this.context.lineTo(n,i)},t.prototype.endLineInternal=function(){this.context.stroke(),this.context.closePath()},t}(a.PlotterBase);t.PlotterCanvas2D=o},174:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PlotterSVG=void 0;var a=n(792),o=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.resize=function(){},t.prototype.initialize=function(e){this.hasBlur=e.blur>0,this.stringParts=[],this.stringParts.push('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n'),this.stringParts.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1000 1000">\n'),this.hasBlur&&(this.stringParts.push("\t<defs>\n"),this.stringParts.push('\t\t<filter id="gaussianBlur" x="0" y="0">\n'),this.stringParts.push('\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="'+e.blur+'"/>\n'),this.stringParts.push("\t\t</filter>\n"),this.stringParts.push("\t</defs>\n"),this.stringParts.push('\t<g filter="url(#gaussianBlur)">\n')),this.stringParts.push('\t<rect fill="'+e.backgroundColor+'" stroke="none" x="0" y="0" width="1000" height="1000"/>\n');var t=e.roundLinecap?' stroke-linecap="round"':"";this.stringParts.push('\t<g fill="none" stroke="'+e.lineColor+'" stroke-width="'+e.lineThickness+'" stroke-linejoin="round"'+t+">\n")},t.prototype.finalize=function(){this.hasBlur&&this.stringParts.push("\t\t</g>\n"),this.stringParts.push("\t</g>\n"),this.stringParts.push("</svg>\n")},t.prototype.endLineInternal=function(){this.stringParts.push('"/>\n')},t.prototype.export=function(){var e=Date.now(),t=this.stringParts.join("");return console.log("Concatenation took "+(Date.now()-e)+" ms."),t},Object.defineProperty(t.prototype,"size",{get:function(){return{width:1e3,height:1e3}},enumerable:!1,configurable:!0}),t.prototype.startLineInternal=function(){this.stringParts.push('\t\t<path d="')},t.prototype.addFirstPointToLineInternal=function(e,t){var n=e.toFixed(1),i=t.toFixed(1);this.stringParts.push("M"+n+","+i+"L")},t.prototype.addPointToLineInternal=function(e,t){var n=e.toFixed(1),i=t.toFixed(1);this.stringParts.push(n+","+i+" ")},t}(a.PlotterBase);t.PlotterSVG=o}},t={};!function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(633)}();
//# sourceMappingURL=main.min.js.map